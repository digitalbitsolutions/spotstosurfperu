---
// frontend/astro/src/pages/about.astro
import BaseLayout from "../layouts/BaseLayout.astro";
import fs from "node:fs";
import path from "node:path";

const title = "About Us";
const description =
    "Meet the Mancora surfers behind Spots to Surf Peru and the trips we design.";

const galleryDir = path.join(process.cwd(), "public", "images");
let galleryImages = [];

try {
    if (fs.existsSync(galleryDir)) {
        galleryImages = fs
            .readdirSync(galleryDir)
            .filter((name) => name.toLowerCase().startsWith("gallery"))
            .filter((name) => /\.(webp|png|jpe?g|avif)$/i.test(name))
            .sort((a, b) => a.localeCompare(b, undefined, { numeric: true }));
    }
} catch (error) {
    galleryImages = [];
}
---

<BaseLayout title={title} description={description}>
    <section class="py-16 lg:py-24">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-14 items-center">
                <div>
                    <span
                        class="bg-blue-50 text-secondary px-3 py-1 rounded-full text-xs font-bold uppercase tracking-widest mb-6 inline-block border border-blue-200"
                    >
                        About Us
                    </span>
                    <h1
                        class="font-serif text-5xl md:text-6xl text-gray-900 leading-tight mb-6"
                    >
                        Surf Trips In Peru, Led By <span class="text-secondary"
                            >Locals</span
                        >
                    </h1>
                    <p class="text-lg text-gray-700 leading-relaxed mb-6">
                        We are <span class="font-bold text-gray-900"
                            >Spots To Surf Peru</span
                        >, two friends from Mancora who grew up chasing waves,
                        sharing meals, and guiding travelers along Peru's
                        coastline.
                    </p>
                    <p class="text-gray-600 mb-6">
                        From the warm northern beaches to iconic breaks further
                        south, we design surf trips in Peru that feel personal,
                        safe, and full of flavor. Expect small groups, honest
                        local tips, and the kind of days that turn strangers
                        into friends.
                    </p>
                    <p class="text-gray-600 mb-10">
                        If you love surfing, great food, and new experiences,
                        you're already part of our tribe.
                    </p>

                    <div class="flex flex-col sm:flex-row gap-4 mb-10">
                        <a
                            href="/contact"
                            class="bg-secondary text-white px-7 py-3 rounded-xl font-semibold text-lg hover:bg-blue-700 transition shadow-lg"
                        >
                            Plan Your Trip
                        </a>
                        <a
                            href="/custom-trip"
                            class="px-7 py-3 rounded-xl font-semibold text-lg text-secondary border border-blue-200 hover:bg-blue-50 transition"
                        >
                            Build A Custom Itinerary
                        </a>
                    </div>

                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-6">
                        <div class="flex items-start gap-3">
                            <div
                                class="w-10 h-10 rounded-full bg-orange-50 flex items-center justify-center shrink-0 border border-orange-200"
                            >
                                <span
                                    class="material-symbols-rounded text-primary"
                                    >surfing</span
                                >
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-900 mb-1">
                                    Surf
                                </h3>
                                <p class="text-sm text-gray-600">
                                    Local breaks and honest guidance.
                                </p>
                            </div>
                        </div>
                        <div class="flex items-start gap-3">
                            <div
                                class="w-10 h-10 rounded-full bg-blue-50 flex items-center justify-center shrink-0 border border-blue-200"
                            >
                                <span
                                    class="material-symbols-rounded text-secondary"
                                    >restaurant</span
                                >
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-900 mb-1">
                                    Food
                                </h3>
                                <p class="text-sm text-gray-600">
                                    Northern flavors and seaside favorites.
                                </p>
                            </div>
                        </div>
                        <div class="flex items-start gap-3">
                            <div
                                class="w-10 h-10 rounded-full bg-blue-50 flex items-center justify-center shrink-0 border border-blue-200"
                            >
                                <span
                                    class="material-symbols-rounded text-secondary"
                                    >travel_explore</span
                                >
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-900 mb-1">
                                    Travel
                                </h3>
                                <p class="text-sm text-gray-600">
                                    Simple, safe, and fun days together.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="relative flex justify-center lg:justify-end">
                    <div
                        class="relative w-[460px] h-[460px] rounded-full overflow-hidden border-8 border-white shadow-2xl"
                    >
                        <img
                            src="/images/aboutus.webp"
                            alt="Spots To Surf Peru founders in Mancora"
                            class="w-full h-full object-cover"
                            loading="lazy"
                            decoding="async"
                            width="460"
                            height="460"
                        />
                        <div
                            class="absolute inset-0 bg-blue-900/30 flex items-center justify-center"
                        >
                            <div class="text-center text-white">
                                <div
                                    class="w-14 h-14 bg-orange-500 rounded-full flex items-center justify-center mx-auto mb-4"
                                >
                                    <span
                                        class="material-symbols-rounded text-3xl"
                                        >location_on</span
                                    >
                                </div>
                                <h3 class="font-serif text-3xl font-bold">
                                    Mancora, Peru
                                </h3>
                                <p
                                    class="text-sm uppercase tracking-widest opacity-90 mt-2"
                                >
                                    Our home
                                </p>
                            </div>
                        </div>
                    </div>

                    <div
                        class="absolute top-0 right-0 w-28 h-28 bg-orange-100 rounded-full -z-10 blur-3xl opacity-50"
                    >
                    </div>
                    <div
                        class="absolute bottom-0 left-6 w-44 h-44 bg-blue-100 rounded-full -z-10 blur-3xl opacity-50"
                    >
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="pb-16 lg:pb-24">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col lg:flex-row items-start lg:items-end justify-between gap-6 mb-10">
                <div>
                    <span
                        class="bg-orange-50 text-primary px-3 py-1 rounded-full text-xs font-bold uppercase tracking-widest mb-4 inline-block border border-orange-200"
                    >
                        Gallery
                    </span>
                    <h2 class="font-serif text-4xl md:text-5xl text-gray-900">
                        Moments From The Coast
                    </h2>
                    <p class="text-gray-600 mt-4 max-w-2xl">
                        A glimpse of the surf, food, and friendships we share on
                        every Peru surf trip.
                    </p>
                </div>
                <a
                    href="/contact"
                    class="inline-flex items-center gap-2 text-secondary font-semibold hover:text-blue-700 transition"
                >
                    Letâ€™s plan yours
                    <span class="material-symbols-rounded text-lg"
                        >arrow_forward</span
                    >
                </a>
            </div>

            {galleryImages.length ? (
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4 md:gap-6">
                    {galleryImages.map((image, index) => (
                        <div
                            class="group relative overflow-hidden rounded-2xl shadow-lg border border-gray-100 bg-white"
                        >
                            <img
                                src={`/images/${image}`}
                                alt={`Spots To Surf Peru gallery photo ${index + 1}`}
                                class="w-full h-full object-cover aspect-[4/3] transition-transform duration-500 group-hover:scale-105"
                                loading="lazy"
                                decoding="async"
                            />
                        </div>
                    ))}
                </div>
            ) : (
                <p class="text-sm text-gray-500">
                    Gallery photos will appear here once they are added.
                </p>
            )}
        </div>
    </section>
</BaseLayout>
